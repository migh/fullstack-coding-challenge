{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/App.tsx","webpack:///./src/components/Input.container.tsx","webpack:///./src/components/Input.tsx","webpack:///./src/components/TranslationsList.tsx","webpack:///./src/index.tsx","webpack:///./src/services/api.ts","webpack:///external \"React\"","webpack:///external \"ReactDOM\""],"names":[],"mappings":"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","file":"app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.tsx\");\n","import * as React from 'react';\n\nimport { InputContainer } from './Input.container';\n\nexport interface AppProps {}\n\nexport const App = (props: AppProps) => (\n  <div id=\"container\">\n    <div className=\"row justify-content-md-center\">\n      <div className=\"col-12 col-lg-6 text-center\">\n        <h2>Test Unbabel API</h2>\n        <InputContainer />\n      </div>\n    </div>\n  </div>\n);\n","import * as React from 'react';\n\nimport * as api from '../services/api';\nimport { Input } from './Input';\nimport { TranslationsList } from './TranslationsList';\n\nexport interface Translation {\n  id: number;\n  textSource: string;\n  textTarget: string;\n  jobId: string;\n  status: string;\n}\n\nexport interface InputState {\n  text: string;\n  translations: Translation[];\n  isLoaded: boolean;\n  requestingTranslation: boolean;\n}\n\nexport class InputContainer extends React.Component {\n  state: InputState = {\n    text: '',\n    translations: [],\n    isLoaded: false,\n    requestingTranslation: false\n  };\n\n  /**\n   * React lifecycle method\n   */\n  componentDidMount() {\n    this.updateTranslations();\n  }\n\n  /**\n   * Updates translation status\n   */\n  updateTranslations() {\n    api.getTranslations().then(translations => {\n      this.setState({\n        isLoaded: true,\n        translations: translations as Translation[]\n      });\n    });\n  }\n\n  /**\n   * Makes a translate request to API\n   */\n  translateClickHandler = () => {\n    const { text } = this.state;\n\n    this.setState({\n      requestingTranslation: true\n    });\n\n    api.translate(text).then(data => {\n      this.setState({\n        requestingTranslation: false\n      });\n\n      this.updateTranslations();\n    });\n  }\n\n  /**\n   * A handler generator for item click and status update\n   */\n  itemClickPartialHandler = (item: Translation) => () => {\n    api.checkStatus(item.jobId).then(({ updated }) => {\n      if (updated) {\n        this.updateTranslations();\n      }\n    });\n  }\n\n  /**\n   * Handle enter button translate trigger\n   */\n  enterHandler = (ev: React.KeyboardEvent<HTMLInputElement>) => {\n    if(ev.key === 'Enter') {\n      this.translateClickHandler();\n    }\n  }\n\n  /**\n   * Handle input's value change\n   */\n  changeHandler = (ev: React.FormEvent<HTMLInputElement>) => {\n    this.setState({ text: ev.currentTarget.value });\n  }\n\n  /**\n   * Renders Input Container\n   */\n  render() {\n    const { text, isLoaded, translations, requestingTranslation } = this.state;\n\n    return (\n      <div className=\"card\">\n        <div className=\"form-group\">\n          <Input\n            placeholder=\"Write some text to translate\"\n            onChange={this.changeHandler}\n            onEnter={this.enterHandler}\n            value={text}\n          />\n          <button type=\"button\" className=\"btn btn-primary my-2\" onClick={this.translateClickHandler}>\n            Translate\n          </button>\n          { requestingTranslation && <h2 className=\"my-2\">Requesting translation...</h2>}\n          <TranslationsList\n            isLoaded={isLoaded}\n            translations={translations}\n            onItemClick={this.itemClickPartialHandler}\n          />\n          <p><strong>Note</strong>: Click on the item to update status.</p>\n        </div>\n      </div>\n    );\n  }\n}\n","import * as React from 'react';\n\nexport interface InputProps {\n  onChange: (event: React.FormEvent<HTMLInputElement>) => void;\n  onEnter: (event: React.FormEvent<HTMLInputElement>) => void;\n  placeholder: string;\n  value: string;\n}\n\nexport const Input = (props: InputProps) => (\n    <input\n      className=\"form-control\"\n      type=\"text\"\n      placeholder={props.placeholder}\n      value={props.value}\n      onChange={props.onChange}\n      onKeyPress={props.onEnter}\n    />\n);\n\n","import * as React from 'react';\nimport { Translation } from './Input.container';\n\n// I know lodash have a function for this\nfunction capitalize(str: string): string {\n  return str.slice(0,1).toUpperCase() + str.slice(1);\n}\n\n// Orders the longer string first\nfunction orderByLength(a: Translation, b: Translation): number {\n  const aLength = a.textTarget && a.textTarget.length || 0;\n  const bLength = b.textTarget && b.textTarget.length || 0;\n  return bLength - aLength;\n}\n\n// I know classnames could work for this\nfunction getClass(status: string): string {\n  switch(status) {\n    case 'requested':\n      return 'list-group-item-success';\n    case 'pending':\n      return 'list-group-item-warning';\n    case 'completed':\n      return 'list-group-item-primary';\n  }\n}\n\nexport interface TranslationsListProps {\n  isLoaded: boolean;\n  translations: Translation[];\n  onItemClick: (item: Translation) => () => void;\n}\n\nexport const TranslationsList = (props: TranslationsListProps) => (\n    <div className=\"row justify-content-md-center\">\n      <div className=\"col-10\">\n        <ul className=\"list-group\">\n          {props.translations.sort(orderByLength).map(translation => (\n            <li\n              className={`list-group-item mb-1 ${getClass(translation.status)}`}\n              style={{ cursor: 'pointer' }}\n              onClick={props.onItemClick(translation)}\n            >\n              {translation.textSource}\n              <span className=\"float-right\">{capitalize(translation.status)}</span>\n              {translation.status === 'completed' && (\n                <React.Fragment>\n                  <hr />\n                  <div>{translation.textTarget}</div>\n                </React.Fragment>\n              )}\n            </li>\n          ))}\n        </ul>\n      </div>\n    </div>\n);\n\n","import * as React from 'react';\nimport * as ReactDOM from 'react-dom';\n\nimport { App } from './components/App';\n\nReactDOM.render(<App />, document.getElementById('app'));\n","export interface Options {\n  url?: string;\n  type?: string;\n  init?: any;\n}\n\n/**\n * Basic API request function\n * As the project grows and depending on the architecture\n * it could make sense to put this into a class.\n * It is promise based but at this point very general.\n * It is hard to test internal function properly.\n */\nexport function request(options: Options) {\n  const { url, type, init } = options;\n\n\n  function requestResolver(resolve: () => any, reject: () => any) {\n  fetch(url, init ? {...init} : {})\n      .then((response: any) => response[type]())\n      .then(resolve)\n      .catch(reject);\n  }\n\n  return new Promise(requestResolver);\n}\n\n/**\n * Hits /translations endpoint\n * Gets all current translations\n */\nexport function getTranslations() {\n  return request({\n    url: '/translations',\n    type: 'json'\n  });\n}\n\n/**\n * Hits /translation/:id endpoint\n * Gets translation status, id is job id in unbabel api\n */\nexport function checkStatus(jobId: string) {\n  return request({\n    url: `/translation/${jobId}`,\n    type: 'json'\n  });\n}\n\n/**\n * Hits /translate endpoint\n * Request a translation\n */\nexport function translate(text: string) {\n  return request({\n    url: '/translate',\n    type: 'text',\n    init: {\n      method: 'POST',\n      body: JSON.stringify({ text }),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }\n  });\n}\n","module.exports = React;","module.exports = ReactDOM;"],"sourceRoot":""}